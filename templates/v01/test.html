<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>練習</title>
    <link rel="stylesheet" type="text/css" href={{ url_for('static', filename='css/jquery-ui.theme.min.css') }} />
    <link rel="stylesheet" type="text/css" href={{ url_for('static', filename='css/ui.jqgrid.css') }} />
    <script src={{ url_for('static', filename='js/jquery-1.7.2.min.js') }} type="text/javascript"></script>
    <script src={{ url_for('static', filename='js/i18n/grid.locale-tw.js') }} type="text/javascript"></script>
    <script src={{ url_for('static', filename='js/jquery.jqGrid.min.js') }} type="text/javascript"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</head>

<body>
    <table id="newapi"></table>
    <div id="pnewapi"></div>
</body>

</html>

<script type="text/javascript">
    jQuery("#colspan").jqGrid({
        url: 'server.php?q=4',
        datatype: "json",
        colNames: ['Date', 'Inv No', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
        colModel: [{
                name: 'invdate',
                index: 'invdate',
                width: 90
            },
            {
                name: 'id',
                key: true,
                index: 'id',
                width: 55,
                cellattr: function (rowId, value, rowObject, colModel, arrData) {
                    return ' colspan=2';
                },
                formatter: function (value, options, rData) {
                    return "Invoce: " + value + " - " + rData['name'];
                }
            },
            {
                name: 'name',
                index: 'name',
                width: 100,
                cellattr: function (rowId, value, rowObject, colModel, arrData) {
                    return " style=display:none; ";
                }
            },
            {
                name: 'amount',
                index: 'amount',
                width: 80,
                align: "right"
            },
            {
                name: 'tax',
                index: 'tax',
                width: 80,
                align: "right"
            },
            {
                name: 'total',
                index: 'total',
                width: 80,
                align: "right"
            },
            {
                name: 'note',
                index: 'note',
                width: 150,
                sortable: false
            }
        ],
        rowNum: 10,
        width: 700,
        rowList: [10, 20, 30],
        pager: '#pcolspan',
        sortname: 'invdate',
        viewrecords: true,
        sortorder: "desc",
        jsonReader: {
            repeatitems: false
        },
        caption: "Data colspan",
        height: '100%'
    });
    jQuery("#colspan").jqGrid('navGrid', '#pcolspan', {
        edit: false,
        add: false,
        del: false
    });
</script>