{% extends 'v01/base.html' %}
{% block container %}
{{ super() }} {% include 'v01/nav.html' %}

<div>
    <table id="jqGrid"></table>
    <div id="jqGridPager"></div>
</div>

<script type="text/javascript">
    $(function() {

        $.jgrid.styleUI.Bootstrap.base.rowTable = "table table-striped";
        $("#jqGrid").jqGrid({
            loadBeforeSend: function(jqXHR) {
                jqXHR.setRequestHeader("Authorization", 'Bearer ' + $.cookie('token'));
            },
            url: '{{ url_for('v01.api_test') }}',
            mtype: "GET",
            responsive: true,
            styleUI: 'Bootstrap',
            datatype: "json",
            colModel: [
                { label: 'sid', name: 'sid', width:10, editable: false, edittype: "text" , search: false},
            ],
            viewrecords: true,
            height: 450,
            rowNum: 100,
            pager: "#jqGridPager",
            sortname: 'sid',
            autowidth: true,
            loadonce: false,
            loadError: function(jqXHR, textStatus, errorThrown) {
                apiErrorHandler(jqXHR);
            }
        });
        $("#jqGrid").jqGrid('setGroupHeaders', {
            useColSpanStyle: true,
            groupHeaders:[
                {startColumnName:'translations.tag_name', numberOfColumns:2, titleText: 'translations'}
            ]
        })
        $("#jqGrid").navGrid("#jqGridPager", {
                edit: false,
                add: false,
                del: false,
                search: false,
                refresh: false,
                view: false,
                align: "left"
            }, 
            {}, 
            {},
            {}, // delete options
            {
                multipleSearch: true,
                searchOnEnter: true,
                closeAfterSearch: true,
                closeAfterReset: true,
                closeOnEscape: true
            }
        );
    });
</script>
{% endblock %}